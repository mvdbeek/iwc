class: GalaxyWorkflow
doc: Downloads fastq files for sequencing run accessions provided in a text file using
  fasterq-dump. Creates one job per listed run accession.
label: Parallel Accession Download
uuid: 0266f0e9-5e1a-4717-9d8a-2ae7af0125e6
inputs:
  Run accessions:
    type: data
    optional: false
    format:
    - txt
    doc: Text file containing run accessions (starting with SRR, ERR or DRR), one
      per line.
    position:
      bottom: 634.3875122070312
      height: 61
      left: 387.4250183105469
      right: 587.4250183105469
      top: 573.3875122070312
      width: 200
      x: 387.4250183105469
      y: 573.3875122070312
outputs:
  Paired End Reads:
    outputSource: flatten paired output
  Single End Reads:
    outputSource: flatten single end output
steps:
  Split accessions to collection:
    tool_shed_repository:
      name: split_file_to_collection
      owner: bgruening
      changeset_revision: 6cbe2f30c2d7
      tool_shed: toolshed.g2.bx.psu.edu
    tool_id: toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.0
    tool_version: 0.5.0
    position:
      bottom: 851.4000244140625
      height: 132
      left: 533.9375
      right: 733.9375
      top: 719.4000244140625
      width: 200
      x: 533.9375
      y: 719.4000244140625
    tool_state:
      split_parms:
        select_ftype: txt
        __current_case__: 5
        input:
          __class__: ConnectedValue
        select_mode:
          mode: chunk
          __current_case__: 0
          chunksize: '1'
        newfilenames: split_file
        select_allocate:
          allocate: byrow
          __current_case__: 2
    in:
      split_parms|input:
        source: Run accessions
    out:
      list_output_txt:
        hide: true
  to parameter:
    tool_id: param_value_from_file
    tool_version: 0.1.0
    position:
      bottom: 678.3875122070312
      height: 132
      left: 725.4625244140625
      right: 925.4625244140625
      top: 546.3875122070312
      width: 200
      x: 725.4625244140625
      y: 546.3875122070312
    tool_state:
      input1:
        __class__: ConnectedValue
      param_type: text
      remove_newlines: 'true'
    in:
      input1:
        source: Split accessions to collection/list_output_txt
    out:
      text_param:
        hide: true
  fasterq-dump:
    tool_shed_repository:
      name: sra_tools
      owner: iuc
      changeset_revision: 69ebb7f46e45
      tool_shed: toolshed.g2.bx.psu.edu
    tool_id: toolshed.g2.bx.psu.edu/repos/iuc/sra_tools/fasterq_dump/2.11.0+galaxy0
    tool_version: 2.11.0+galaxy0
    position:
      bottom: 889.3624877929688
      height: 242
      left: 992.3500366210938
      right: 1192.3500366210938
      top: 647.3624877929688
      width: 200
      x: 992.3500366210938
      y: 647.3624877929688
    tool_state:
      __job_resource:
        __job_resource__select: 'no'
        __current_case__: 0
      adv:
        minlen: null
        split: --split-3
        skip_technical: 'true'
      input:
        input_select: accession_number
        __current_case__: 0
        accession:
          __class__: ConnectedValue
    in:
      input|accession:
        source: to parameter/text_param
    out:
      list_paired:
        hide: true
      output_collection:
        hide: true
      output_collection_other:
        hide: true
      log:
        hide: true
  flatten paired output:
    tool_id: __APPLY_RULES__
    tool_version: 1.1.0
    position:
      bottom: 774.3624877929688
      height: 112
      left: 1327.425048828125
      right: 1527.425048828125
      top: 662.3624877929688
      width: 200
      x: 1327.425048828125
      y: 662.3624877929688
    tool_state:
      input:
        __class__: ConnectedValue
      rules:
        mapping:
        - collapsible_value:
            __class__: RuntimeValue
          columns:
          - 1
          connectable: true
          editing: false
          is_workflow: false
          type: list_identifiers
        - collapsible_value:
            __class__: RuntimeValue
          columns:
          - 2
          connectable: true
          is_workflow: false
          type: paired_identifier
        rules:
        - collapsible_value:
            __class__: RuntimeValue
          connectable: true
          error: null
          is_workflow: false
          type: add_column_metadata
          value: identifier0
          warn: null
        - collapsible_value:
            __class__: RuntimeValue
          connectable: true
          error: null
          is_workflow: false
          type: add_column_metadata
          value: identifier1
          warn: null
        - collapsible_value:
            __class__: RuntimeValue
          connectable: true
          error: null
          is_workflow: false
          type: add_column_metadata
          value: identifier2
          warn: null
    in:
      input:
        source: fasterq-dump/list_paired
    out:
      output:
        add_tags:
        - name:PE
  flatten single end output:
    tool_id: __APPLY_RULES__
    tool_version: 1.1.0
    position:
      bottom: 920.4125366210938
      height: 112
      left: 1326.4749755859375
      right: 1526.4749755859375
      top: 808.4125366210938
      width: 200
      x: 1326.4749755859375
      y: 808.4125366210938
    tool_state:
      input:
        __class__: ConnectedValue
      rules:
        mapping:
        - collapsible_value:
            __class__: RuntimeValue
          columns:
          - 1
          connectable: true
          editing: false
          is_workflow: false
          type: list_identifiers
        rules:
        - collapsible_value:
            __class__: RuntimeValue
          connectable: true
          error: null
          is_workflow: false
          type: add_column_metadata
          value: identifier0
          warn: null
        - collapsible_value:
            __class__: RuntimeValue
          connectable: true
          error: null
          is_workflow: false
          type: add_column_metadata
          value: identifier1
          warn: null
    in:
      input:
        source: fasterq-dump/output_collection
    out:
      output:
        add_tags:
        - name:SE
version: 1
